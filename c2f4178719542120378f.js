const feedbackInfo=document.querySelector(".feedback__information"),feedbackForm=document.querySelector(".feedback__form"),feedbackContent=document.querySelector(".feedback__content"),feedbackSelect=document.querySelector(".feedback__select"),validtaionFormFeedback=e=>{switch(e.id){case"first__name":case"last__name":e.style.backgroundColor=/^([A-Za-z]+)$/gi.exec(e.value)||0==e.value.length?"#ffffff":"#d73333";break;case"email":e.style.backgroundColor=/([A-Za-z0-9._-]+@[A-Za-z]+\.[A-Za-z])/gi.exec(e.value)||0==e.value.length?"#ffffff":"#d73333";break;case"phone":e.style.backgroundColor=/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/gi.exec(e.value)||0==e.value.length?"#ffffff":"#d73333";break;case"address":case"service":e.style.backgroundColor=e.value.length>=10&&e.value.length<=140||0==e.value.length?"#ffffff":"#d73333";break;case"message":e.style.backgroundColor=e.value.length>=10||0==e.value.length?"#ffffff":"#d73333"}},isEmptyFormFeedback=e=>{Array(...e.form).filter((e=>"INPUT"===e.tagName||"TEXTAREA"===e.tagName)).map((e=>{0===e.value.length&&(e.style.backgroundColor="#d73333",setTimeout((()=>{e.style.backgroundColor="#ffffff"}),1500))}))},countRightInputValidation=e=>Array(...e.form).filter((e=>"INPUT"===e.tagName||"TEXTAREA"===e.tagName)).filter((e=>"rgb(255, 255, 255)"===e.style.backgroundColor||""===e.style.backgroundColor)).length,responseFeedbackInformation=()=>'\n    <div class = "feedback__information feedback__submitted">\n        <h2 class="feedback__headline">Thank you!</h2>\n        <p class="feedback__text text-m">\n            Your message has been submitted\n        </p>\n    </div>\n    ',requestFeedback=async e=>{const t=await fetch("/feedback",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)});return await t.json()},editContentFeedback=(e,t,a,r="")=>{r&&r.remove(),e.insertAdjacentHTML(t,a)};window.addEventListener("click",(e=>{feedbackSelect.contains(e.target)||(feedbackSelect.children[0].style.borderRadius="16px",feedbackSelect.children[2].style.display="none")})),feedbackForm.addEventListener("focusout",(e=>{e.preventDefault(),validtaionFormFeedback(e.target)})),feedbackForm.addEventListener("focusin",(e=>{if(e.preventDefault(),"select__service"===e.target.id){const t=feedbackSelect.children[2];e.target.style.borderRadius="16px 16px 0px 0px",t.style.display="block"}})),feedbackSelect.addEventListener("click",(e=>{"LI"===e.target.tagName&&(feedbackSelect.children[0].value=e.target.innerHTML,feedbackSelect.children[0].style.borderRadius="16px",feedbackSelect.children[2].style.display="none")})),feedbackForm.addEventListener("click",(e=>{if(e.preventDefault(),"BUTTON"===e.target.tagName&&(validtaionFormFeedback(e.target),isEmptyFormFeedback(e.target),7===countRightInputValidation(e.target))){const t={firstName:e.target.form[0].value,lastName:e.target.form[1].value,email:e.target.form[2].value,phone:e.target.form[3].value,address:e.target.form[4].value,services:e.target.form[5].value,message:e.target.form[6].value};localStorage.setItem("queryFeedback",t),editContentFeedback(feedbackContent,"beforeend",responseFeedbackInformation(),feedbackInfo),requestFeedback(t)}})),document.addEventListener("DOMContentLoaded",(()=>{localStorage.getItem("queryFeedback")&&editContentFeedback(feedbackContent,"beforeend",responseFeedbackInformation(),feedbackInfo)}));